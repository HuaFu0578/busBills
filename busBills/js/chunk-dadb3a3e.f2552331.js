(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dadb3a3e"],{"04ec":function(t,e,a){},"1af6":function(t,e,a){var n=a("63b6");n(n.S,"Array",{isArray:a("9003")})},"1dc5":function(t,e,a){"use strict";var n=a("8a9f"),i=a.n(n);i.a},"2b8c5":function(t,e,a){"use strict";var n=a("ead6"),i=a.n(n);i.a},"40c3":function(t,e,a){var n=a("6b4c"),i=a("5168")("toStringTag"),r="Arguments"==n(function(){return arguments}()),s=function(t,e){try{return t[e]}catch(a){}};t.exports=function(t){var e,a,o;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(a=s(e=Object(t),i))?a:r?n(e):"Object"==(o=n(e))&&"function"==typeof e.callee?"Arguments":o}},"469f":function(t,e,a){a("6c1c"),a("1654"),t.exports=a("7d7b")},"4dff":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{staticClass:"container",attrs:{direction:"vertical"}},[a("el-header",{staticClass:"header"},[a("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{staticClass:"el-row is-justify-flex-start el-row--flex",attrs:{span:6}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"save-area"},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.clickSave}},[t._v("保存")])],1)]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"save-area"},[a("el-button",{attrs:{type:"danger",size:"medium"},on:{click:t.clearAll}},[t._v("清空表格")])],1)])],1),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"header-title w100 h100"},[a("drop-select",{attrs:{name:"input_year",id:"input_year","value-arr":t.yearRange,search:t.searchYear},on:{searchChange:t.yearChange}}),t._v("年\n          "),a("drop-select",{attrs:{name:"input_month",id:"input_month","value-arr":t.monthRange,search:t.searchMonth},on:{searchChange:t.monthChange}}),t._v("月账单输入\n        ")],1)]),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"setting-menu"},[a("setting-menu",{attrs:{menuItems:t.menuItems,showTitle:t.showTitle,whichItemShow:t.whichItemShow,defaultParams:t.originData,paramsCallback:t.paramsCallback},on:{"update:showTitle":function(e){t.showTitle=e},"update:show-title":function(e){t.showTitle=e},"update:whichItemShow":function(e){t.whichItemShow=e},"update:which-item-show":function(e){t.whichItemShow=e}}})],1)])],1)],1),a("el-main",{staticClass:"main pop-relative"},[a("input-table",{directives:[{name:"print",rawName:"v-print",value:t.isPrint,expression:"isPrint"}],staticClass:"table-area",attrs:{sendOriginData:JSON.stringify(t.originData),curMonLength:t.curMonLength,isPrint:t.isPrint},on:{dealDayBill:t.dealDayBill}}),t.showConfirmModal?a("pop-dialog",{attrs:{type:"confirmModal",msg:t.modalMsg,tips:t.modalTips,tipsIcon:t.modalTipsIcon,confirmCbFn:t.confirmCbFn}}):t._e(),t.isSave?a("pop-dialog",{attrs:{type:"msgModal",state:t.saveState,autoHidden:t.isSave},on:{"update:autoHidden":function(e){t.isSave=e},"update:auto-hidden":function(e){t.isSave=e}}}):t._e(),t.showGenModal?a("pop-dialog",{attrs:{showGenModal:t.showGenModal,type:"generalModal",tips:t.modalTips,tipsIcon:t.modalTipsIcon,msg:t.modalMsg},on:{"update:showGenModal":function(e){t.showGenModal=e},"update:show-gen-modal":function(e){t.showGenModal=e}}}):t._e()],1)],1)},i=[],r=(a("8e6e"),a("456d"),a("ac6a"),a("bd86")),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-table"},[a("div",{staticClass:"head-wrapper"},[a("table",{attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[a("colgroup",[a("col",{staticClass:"lh"}),t._l(t.carNum,function(t){return a("col",{key:"head_col"+t,staticClass:"content"})})],2),a("thead",[a("tr",[a("th",{staticClass:"lh"}),t._l(t.carName,function(e,n){return a("th",{key:"head_"+e,staticClass:"content",class:t.focusingCar===n+1?"focus":""},[t._v(t._s(e))])})],2)])])]),a("div",{staticClass:"body-wrapper"},[a("table",{attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[a("colgroup",[a("col",{staticClass:"lh"}),t._l(t.carNum,function(t){return a("col",{key:"head_col"+t,staticClass:"content"})})],2),a("tbody",t._l(t.curMonLength,function(e){return a("tr",{key:"tr"+e},[a("th",{staticClass:"lh",class:{focus:t.isFocused(e)}},[t._v(t._s(e))]),t._l(t.carNum,function(n,i){return a("td",{key:"tr"+e+n,staticClass:"content"},[a("div",{staticClass:"aux-wrap"},[t.isPrint?a("span",[t._v(t._s(t.receiveOrData(e)[n]))]):a("input",{directives:[{name:"focus",rawName:"v-focus"}],ref:e+"_"+(i+1),refInFor:!0,class:t.transClass(t.receiveOrData(e)[n]),attrs:{type:"text","data-pos":e+","+(i+1),"data-car":n,"data-day":e},domProps:{value:t.receiveOrData(e)[n]},on:{change:t.inpValChange,focus:function(a){t.handleFocus(e,i+1,a)},blur:t.handleBlur}})])])})],2)}),0)])])])},o=[],c=(a("7f7f"),a("28a5"),a("a745")),l=a.n(c);function u(t){if(l()(t))return t}var h=a("5d73"),d=a.n(h);function f(t,e){var a=[],n=!0,i=!1,r=void 0;try{for(var s,o=d()(t);!(n=(s=o.next()).done);n=!0)if(a.push(s.value),e&&a.length===e)break}catch(c){i=!0,r=c}finally{try{n||null==o["return"]||o["return"]()}finally{if(i)throw r}}return a}function p(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function m(t,e){return u(t)||f(t,e)||p()}var g=a("2f62");function v(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)}return a}function b(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?v(a,!0).forEach(function(e){Object(r["a"])(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):v(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var w={data:function(){return{focusingCar:-1,focusingDay:-1}},computed:b({},Object(g["c"])(["carNum"]),{},Object(g["b"])(["carName"]),{isFocused:function(){var t=this;return function(e){return t.focusingDay==e}},receiveOrData:function(){var t=this;return function(e){return JSON.parse(t.sendOriginData)["day"+e]}}}),props:["sendOriginData","curMonLength","isPrint"],methods:{inpValChange:function(t){var e=t.target,a=e.value,n=e.dataset.car,i="day"+e.dataset.day;this.$emit("dealDayBill",i,n,a)},handleFocus:function(t,e,a){a.target.select(),this.focusingCar=e,this.focusingDay=t},handleBlur:function(){this.focusingCar=-1,this.focusingDay=-1},transClass:function(t){if("string"==typeof t){var e=t.indexOf("休班")>-1?"xiuban":t.indexOf("未跑")>-1?"weipao":t.indexOf("踏班")>-1?"taban":"";return e}}},mounted:function(){var t=this.$refs,e=Object.keys(t),a=e[e.length-1].split("_"),n=m(a,2),i=n[0],r=n[1];i=parseInt(i),r=parseInt(r),e.forEach(function(e,a){var n=t[e][0],s=n.dirStore||(n.dirStore={}),o=e.split("_"),c=m(o,2),l=c[0],u=c[1];l=parseInt(l),u=parseInt(u),s.top=t[(i-1+(l-1))%i+1+"_"+((r-1+u)%r+1)][0],s.right=t[(i-1+l)%i+1+"_"+((r-1+u+1)%r+1)][0],s.bottom=t[(i-1+(l+1))%i+1+"_"+((r-1+u)%r+1)][0],s.left=t[(i-1+l)%i+1+"_"+((r-1+u-1)%r+1)][0]})},directives:{focus:{bind:function(t,e,a){t.onfocus=function(){document.onkeydown=function(e){if(!(e.keyCode<37||e.keyCode>40)){var a="";switch(e.keyCode){case 38:a="top";break;case 40:a="bottom";break;case 37:a="left";break;case 39:a="right";break}t.dirStore[a].select(),t.dirStore[a].focus()}}},t.addEventListener("blur",function(){document.onkeydown=null})}}}},y=w,O=(a("5004"),a("2877")),D=Object(O["a"])(y,s,o,!1,null,"04bee4a4",null),C=D.exports,M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("select",{attrs:{name:t.name,id:t.id},domProps:{value:t.search},on:{change:t.handleChanged}},t._l(t.valueArr,function(e){return a("option",{key:t.id+e,domProps:{value:e}},[t._v(t._s(e))])}),0)},k=[],S={props:["name","id","valueArr","search"],methods:{handleChanged:function(t){var e=t.target.value;this.$emit("searchChange",parseInt(e))}}},_=S,I=(a("8496"),Object(O["a"])(_,M,k,!1,null,"bd41d392",null)),j=I.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"setting-menu",class:Object.keys(t.menuItems).length>0?"item-num-"+Object.keys(t.menuItems).length:"",attrs:{title:"设置"},on:{mouseleave:t.handleLeave}},t._l(t.menuItems,function(e,n){return a("button",{key:e.title,class:n+" "+(t.whichItemShow==n?"down-arrow":""),attrs:{title:t.showTitle?e.title:""},on:{click:e.callback}},[t.whichItemShow==n?a("item-show",{attrs:{type:t.whichItemShow,defaultParams:t.defaultParams,itemShowEnter:t.itemShowEnter,itemShowLeave:t.itemShowLeave,paramsCallback:t.paramsCallback}}):t._e()],1)}),0)},P=[],F={props:["menuItems","whichItemShow","defaultParams","showTitle","paramsCallback"],components:{itemShow:function(){return a.e("chunk-602296c0").then(a.bind(null,"8367"))}},methods:{handleLeave:function(){this.$emit("update:whichItemShow","")},itemShowEnter:function(){this.$emit("update:showTitle",!1)},itemShowLeave:function(){this.$emit("update:showTitle",!0)}}},x=F,$=(a("5cae"),Object(O["a"])(x,T,P,!1,null,"cea01d70",null)),E=$.exports,N=a("4328"),L=a.n(N);function A(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)}return a}function G(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?A(a,!0).forEach(function(e){Object(r["a"])(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):A(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var R={name:"inputPage",data:function(){return{showConfirmModal:!1,isSave:!1,showGenModal:!1,showTitle:!0,isPrint:!1,whichItemShow:"",modalTips:"",modalTipsIcon:"",modalMsg:"",saveState:"",isClearAll:!1,confirmCbFn:function(){},loadingInstance:null,loadingOptions:{fullscreen:!0,text:"请求数据中......",background:"rgba(0,0,0,.6)",lock:!0}}},computed:G({},Object(g["c"])(["carNum","siteHF","curMonLength","searchYear","searchMonth"]),{},Object(g["b"])(["yearRange","monthRange"]),{originData:function(){this.isClearAll;var t={date:this.searchYear+"_"+this.searchMonth,oilFee:180,mulOilFee:120,lastMonthRemain:"",currentMonthRemain:"",hasSaved:!1},e={};this.carNum.forEach(function(t){e[t]=""});for(var a=0,n=this.curMonLength;a<n;a++)t["day"+(a+1)]=G({},e);return t},menuItems:function(){return{oilFee:{title:"设置默认参数",callback:this.oilFeeFn},printer:{title:"打印表格",callback:this.printerFn},output:{title:"导出",callback:this.outputFn}}}}),components:{inputTable:C,dropSelect:j,settingMenu:E,popDialog:function(){return a.e("chunk-031305e8").then(a.bind(null,"6ee0"))}},created:function(){this.pullData()},methods:{clickSave:function(){var t=this;this.confirmRequest(function(e,n){t.modalTips="警告",t.modalTipsIcon=a("73f5"),t.modalMsg="".concat(e,"年").concat(n,"月账单数据文件已存在，是否覆盖原数据？"),t.showConfirmModal=!0,t.confirmCbFn=function(e){e&&t.pushData(t.originData),t.showConfirmModal=!1}})},clearAll:function(){var t=this;this.modalTips="警告",this.modalTipsIcon=a("73f5"),this.modalMsg="是否清空当前表格所有数据？",this.showConfirmModal=!0,this.confirmCbFn=function(e){e&&(t.isClearAll=!0),t.showConfirmModal=!1}},oilFeeFn:function(){this.whichItemShow="oilFee"},printerFn:function(){this.modalTips="温馨提示",this.modalTipsIcon=a("a223"),this.modalMsg="打印功能正在快马加鞭建设中，请耐心等待......",this.showGenModal=!0},outputFn:function(){this.modalTips="温馨提示",this.modalTipsIcon=a("a223"),this.modalMsg="导出功能正在快马加鞭建设中，请耐心等待......",this.showGenModal=!0},paramsCallback:function(t,e){var a=parseInt(t.target.value);if(!isNaN(a)){switch(e){case"oilFee":this.$set(this.originData,"oilFee",a);break;case"mulOilFee":this.$set(this.originData,"mulOilFee",a);break;case"lastMonthRemain":this.$set(this.originData,"lastMonthRemain",a);break;case"currentMonthRemain":this.$set(this.originData,"currentMonthRemain",a);break}this.calculateData(this.originData)}},yearChange:function(t){this.$store.commit("searchYear",t),this.pullData().changeMonLength()},monthChange:function(t){this.$store.commit("searchMonth",t),this.pullData().changeMonLength()},dealDayBill:function(t,e,a){this.originData.hasSaved=!1,this.originData[t][e]=a,this.refreshOriginData()},changeMonLength:function(){return this.$store.commit("changeMonLength",{year:this.searchYear,month:this.searchMonth}),this},refreshOriginData:function(t){return Object.assign(this.originData,t||{}),this.$forceUpdate(),this},confirmRequest:function(t){var e=this,a=this.searchYear,n=this.searchMonth,i=this.siteHF,r=(this.comMethods,{url:i.hostName+i.setData,method:"GET",params:{oper:"origin",year:a,month:n}});return this.requestData(r).then(function(i){var r=i.data;"ok"==r.status?t(a,n):e.pushData(),e.loadingInstance.close()},function(t){console.log(t)}),this},requestData:function(t){return this.loadingInstance=this.$loading(this.loadingOptions),"POST"===t.method?this.$ajax.post(t.url,t.data):"GET"===t.method?this.$ajax.get(t.url,{params:t.params}):void 0},calculateData:function(t){var e=this,a=this.siteHF,n=this.comMethods,i={url:a.hostName+a.calData,method:"POST",data:L.a.stringify({data:n.encrypt(t)})};return this.requestData(i).then(function(t){var a=t.data;if("ok"==a.status){var i=n.unEncrypt(a.data);e.$store.commit("refreshDealedData",i),e.loadingInstance.close()}else e.$store.commit("refreshDealedData","init"),console.log("计算数据失败",a)},function(t){console.log(t)}),this},pullData:function(){var t=this,e=this.searchYear,a=this.searchMonth,n=this.siteHF,i=this.comMethods,r={url:n.hostName+n.getData,method:"GET",params:{oper:"origin",year:e,month:a}};return this.requestData(r).then(function(e){var a=e.data;if("ok"==a.status){var n=i.unEncrypt(a.data);t.refreshOriginData(n).calculateData(n)}else t.$store.commit("refreshDealedData","init"),console.log(a);t.loadingInstance.close()},function(t){console.log(t)}),this},pushData:function(){var t=this,e=(this.searchYear,this.searchMonth,this.siteHF),a=this.comMethods;this.originData.hasSaved=!0;var n={url:e.hostName+e.setData,method:"POST",data:L.a.stringify({data:a.encrypt(this.originData)})};return this.requestData(n).then(function(e){var a=e.data;"ok"==a.status?t.saveState="success":(t.originData.hasSaved=!1,t.saveState="fail"),t.loadingInstance.close(),t.isSave=!0},function(t){console.log(t)}),this}}},Y=R,q=(a("2b8c5"),a("1dc5"),Object(O["a"])(Y,n,i,!1,null,"5ab9e14e",null));e["default"]=q.exports},5004:function(t,e,a){"use strict";var n=a("04ec"),i=a.n(n);i.a},"5cae":function(t,e,a){"use strict";var n=a("b1b8"),i=a.n(n);i.a},"5d73":function(t,e,a){t.exports=a("469f")},"73f5":function(t,e,a){t.exports=a.p+"img/warning.9b31565d.png"},"7cd6":function(t,e,a){var n=a("40c3"),i=a("5168")("iterator"),r=a("481b");t.exports=a("584a").getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||r[n(t)]}},"7d7b":function(t,e,a){var n=a("e4ae"),i=a("7cd6");t.exports=a("584a").getIterator=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return n(e.call(t))}},"7f7f":function(t,e,a){var n=a("86cc").f,i=Function.prototype,r=/^\s*function ([^ (]*)/,s="name";s in i||a("9e1e")&&n(i,s,{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch(t){return""}}})},8496:function(t,e,a){"use strict";var n=a("d329"),i=a.n(n);i.a},"8a9f":function(t,e,a){},a223:function(t,e,a){t.exports=a.p+"img/warmTip.e8c9c448.png"},a745:function(t,e,a){t.exports=a("f410")},b1b8:function(t,e,a){},d329:function(t,e,a){},ead6:function(t,e,a){},f410:function(t,e,a){a("1af6"),t.exports=a("584a").Array.isArray}}]);